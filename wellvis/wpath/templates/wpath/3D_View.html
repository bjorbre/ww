{% extends "base/full_view.html" %}

{% block content %}
{{path }}
	<div id="theMainContainer">

		<div id="theControlButtonsContainer">
			<span style="color: #fff; float: left; margin: 0px 5px; padding: 5px 0px 0px 0px">Toggle</span>
			<button id="toggleAxesPlanes" class="btn activeBtn">Planes</button>
			<button id="toggleGridBtn" class="btn activeBtn">Grids</button>
			<button id="toggleLabels" class="btn activeBtn">Labels</button>			
			<button id="toggleRotationCenterSymbol" class="btn activeBtn">Rotation point</button>	
			<button id="toggleWellPath" class="btn activeBtn">Well Path</button>

		</div>

		<div id="theLeftPanel">
			<div id="theTabs">
				<ul>
					<li><a href="#theTabs-1">Well Paths</a></li>
					<li><a href="#theTabs-2">Configuration</a></li>
				</ul>
				<div id="theTabs-1">   
					<div id="thePathsDetailContainer">
						<div id="theAddPathHeader">
							<div class="divMD headerMD">MD <br /> (m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">CL <br /> (m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">INC  <br />  (&#176;)</div>
							<div class="divMiddleBoxes headerMiddleOnes">AZI  <br />  (&#176;)</div>
							<div class="divMiddleBoxes headerMiddleOnes">TVD  <br />  (m) </div>
							<div class="divMiddleBoxes headerMiddleOnes">NS  <br />  (m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">EW  <br /> (m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">V.Sec  <br /> (m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">Dogleg  <br />  (&#176;/30m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">Build <br />  (&#176;/30m)</div>
							<div class="divMiddleBoxes headerMiddleOnes">Turn  <br />  (&#176;/30m)</div>
							<div class="divMethodType headerMiddleOnes">Method   <br /> Type</div>
							<div class="divEmpty headerEmpty"></div>
						</div>
						<div id="theAddPathContainer">
						</div>
					</div>
				</div>
				<div id="theTabs-2">
					<div id="theConfigurationPanel">
						<!-- The Scene -->
						<div class="settingsLargerDIVforTitle">
							<span >The Scene</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span>Color</span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="theSceneColorInput" type="text" name="theSceneColorInput" size="10"/>
							</div>
						</div>


						<div class="settingSeparatorLine"></div>


						<!-- The Well Path -->
						<div class="settingsLargerDIVforTitle">
							<span >The Well Path</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span>Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="theWellPathColorInput" type="text" name="theWellPathColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="theWellPathLineOpacity" class="theSlider"></div>
						</div>
							


						<div class="settingSeparatorLine"></div>


						<!-- The XY Plane -->
						<div class="settingsLargerDIVforTitle">
							<span >The XY Plane</span>
						</div>
						<div class="settingsMediumDIV">
							<span >Outline</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="XYplaneOutlineColorInput" type="text" name="valueXYplaneOutlineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span>Opacity </span>
							</div>
							<div id="XYplaneOutlineLineOpacity" class="theSlider"></div>
						</div>
						<div class="settingsMediumDIV">
							<span >Grid-lines</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="XYplaneGridlineColorInput" type="text" name="valueXYplaneGridlineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="XYplaneGridlineLineOpacity" class="theSlider"></div>
						</div>
						<div class="settingsMediumDIV">
							<span >Axis-Line</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="XYplaneAxislineColorInput" type="text" name="valueXYplaneAxislineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="XYplaneAxislineLineOpacity" class="theSlider"></div>
						</div>
						

						<div class="settingSeparatorLine"></div>


						<!-- The XZ Plane -->
						<div class="settingsLargerDIVforTitle">
							<span >The XZ Plane</span>
						</div>
						<div class="settingsMediumDIV">
							<span >Outline</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="XZplaneOutlineColorInput" type="text" name="valueXZplaneOutlineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="XZplaneOutlineLineOpacity" class="theSlider"></div>
						</div>
						<div class="settingsMediumDIV">
							<span >Grid-Lines</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="XZplaneGridlineColorInput" type="text" name="valueXZplaneGridlineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="XZplaneGridlineLineOpacity" class="theSlider"></div>
						</div>
						<div class="settingsMediumDIV">
							<span >Axis-Line</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="XZplaneAxislineColorInput" type="text" name="valueXZplaneAxislineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="XZplaneAxislineLineOpacity" class="theSlider"></div>
						</div>

						
						<div class="settingSeparatorLine"></div>


						<!-- The YZ Plane -->
						<div class="settingsLargerDIVforTitle">
							<span >The YZ Plane</span>
						</div>
						<div class="settingsMediumDIV">
							<span >Outline</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="YZplaneOutlineColorInput" type="text" name="valueYZplaneOutlineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="YZplaneOutlineLineOpacity" class="theSlider"></div>
						</div>
						<div class="settingsMediumDIV">
							<span >Grid-Lines</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="YZplaneGridlineColorInput" type="text" name="valueYZplaneGridlineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="YZplaneGridlineLineOpacity" class="theSlider"></div>
						</div>
						<div class="settingsMediumDIV">
							<span >Axis-Line</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="YZplaneAxislineColorInput" type="text" name="valueYZplaneAxislineColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Color </span>
							</div>
							<div id="YZplaneAxislineLineOpacity" class="theSlider"></div>
						</div>


						<div class="settingSeparatorLine"></div>


						<!-- Labels -->
						<div class="settingsLargerDIVforTitle">
							<span >Labels</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="labelColorInput" type="text" name="labelColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="labelOpacity" class="theSlider"></div>
						</div>
						<div class="settingsLargerDIV ">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Size </span>
							</div>
							<div id="labelSizeSlider" class="theSlider" style="width: 278px;"></div>
						</div>


						<div class="settingSeparatorLine" style="border-top: 1px solid #222; border-bottom: 1px solid #444;"></div>
						

						<!-- North Arrow -->
						<div class="settingsLargerDIVforTitle">
							<span >North Arrow</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="arrowColorInput" type="text" name="arrowColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="arrowOpacity" class="theSlider"></div>
						</div>


						<div class="settingSeparatorLine" style="border-top: 1px solid #111; border-bottom: 1px solid #333;"></div>
						

						<!-- Center of Rotation -->
						<div class="settingsLargerDIVforTitle">
							<span >Center of Rotation</span>
						</div>
						<div class="settingsLargerDIV">
							<div class="settingsSmallerDIV settingColorText" style="">
								<span >Color </span>
							</div>						
							<div class="settingsInputContainerDIV" style="">
								<input id="rotationSignColorInput" type="text" name="rotationSignColorInput" size="10"/>
							</div>
							<div class="settingsSmallerDIV settingOpacityText" style="">
								<span >Opacity </span>
							</div>
							<div id="rotationSignOpacity" class="theSlider"></div>
						</div>


						<div id="someFooterSpace" style="height: 30px; width: 200px;"></div>

					</div>
				</div>
			</div>
			
			<div id="showHideLeftPanelButtonContainer">
				<button id="showHideLeftPanelBtn" class="btn" >Hide</button>
			</div>
	

	 	</div>
		

		
		<!-- The Container  -->
		<div id="theContainer" style=""> </div>
		

	</div>

{% endblock %}

{% block styles %}

<link type="text/css" rel="stylesheet"  href="{{ STATIC_URL }}css/dark-hive/jquery-ui-1.10.3.custom.min.css" />

<!-- The ColorPicker -->
<link rel='stylesheet' href='{{ STATIC_URL }}css/spectrum.css' />

<!-- The Slider -->
<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery.nouislider.min.css" >

	<style>

#theMainContainer {
	color: #000;
	font-family:Monospace;
	font-size:13px;
	text-align:center;
	font-weight: bold;

	background-color: #fff;
	margin: 0px;
	padding: 0px;

	overflow: hidden;

	width: 100%;
}


#theControlButtonsContainer {
	background: -webkit-gradient(linear, center bottom, center top, from(#141414), to(#5A5A5A) );
	height: 40px;
	border: 1px solid #000;
	padding: 5px 10px 1px 10px;
}

	.btn {
		border-radius: 3px;
		height: 30px;
		float: left;

		padding: 0 10px 0 10px;
		margin: 0 2px;
	}
		.activeBtn {
			background: #ccc;
			background: -webkit-gradient(linear, center bottom, center top, from(#FDFDFD), to(#C7C7C7) );
			background: -moz-linear-gradient(90deg, #FDFDFD, #C7C7C7);
			color: #000;
		    cursor: pointer;
		    border-top: solid 2px #eaeaea;
		    border-left: solid 2px #eaeaea;
		    border-bottom: solid 2px #777;
		    border-right: solid 2px #777;
		}

		.inactiveBtn {
			color:#888;
		    background: #bbb;
		    border-top: solid 2px #777;
		    border-left: solid 2px #777;
		    border-bottom:solid 2px  #eaeaea;
		    border-right: solid 2px #eaeaea;		
		}




		.addEditPathBtn {
			width: 70px;
			height: 30px;
			margin: 3px;
			padding: 0;
			background: #A0A2F3;
			font-weight: bold;
			color: #ddd;

			background: #2e68f2; /* Old browsers */
			background: -moz-linear-gradient(top,  #2e68f2 0%, #7db9e8 0%, #8195ef 0%, #1e5799 100%, #207cca 100%); /* FF3.6+ */
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#2e68f2), color-stop(0%,#7db9e8), color-stop(0%,#8195ef), color-stop(100%,#1e5799), color-stop(100%,#207cca)); /* Chrome,Safari4+ */
			background: -webkit-linear-gradient(top,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* Chrome10+,Safari5.1+ */
			background: -o-linear-gradient(top,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* Opera 11.10+ */
			background: -ms-linear-gradient(top,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* IE10+ */
			background: linear-gradient(to bottom,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* W3C */
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2e68f2', endColorstr='#207cca',GradientType=0 ); /* IE6-9 */


			border-top: 1px solid #6C7292;
			border-right: 1px solid #333333;
			border-bottom: 2px solid #333;
			border-left: 1px solid #5255AA;
			
		}

		.pressedBtn {

			border-top: 2px solid #4F5785;
			border-right: 1px solid #708DDA;
			border-bottom: 1px solid #6F6363;
			border-left: 1px solid #1d1d1d;

			
		}

#theLeftPanel {
	float: left;
}

#showHideLeftPanelButtonContainer {
	float: left;
	position: absolute;
	left: 418px;
	margin-top: 7px;
}

	#showHideLeftPanelBtn {
		border-radius: 0px 5px 5px 0px;
		background: #0972a5;
		border: 1px solid #000;
	}


#theTabs {
	float: left;
	border: 0px;
	border-radius: 0;
	background: #000;
}	
	
	#theTabs-1, #theTabs-2 { 
		padding: 0;
	}



#thePathsDetailContainer {
	height: 100px;
	width: 400px;
	float: left;
	background: -webkit-gradient(linear, center bottom, center top, from(#141414), to(#5A5A5A) );
	overflow: auto;
	
}
	#theAddPathHeader {
		width: 1350px;
		height: 51px;
		color: #fff;
		background: -webkit-gradient(linear, center bottom, center top, from(#141414), to(#5A5A5A) );
		border-top: 1px solid #000;
		border-bottom: 1px solid #575757;

	}
		.divMD {
			height 50px;
			width: 100px;
			float: left;

			padding: 5px 0px;
		}
	
		.divMiddleBoxes {
			float: left;
			width: 100px;

			padding: 5px 0px;
		}

		.divMethodType {
			float: left;
			width: 150px;

			padding: 5px 0px;

		}
		
		.divINC {
			float: left;
			width: 100px;

			padding: 5px 0px;
		}

		.divAZI {
			float: left;
			width: 100px;

			padding: 5px 0px;
		}

		.divNS { 
			float: left;
			width: 100px;

			padding: 5px 0px;
		}

		.divEW { 
			float: left;
			width: 100px;

			padding: 5px 0px;
		}

		.divVsec { 
			float: left;
			width: 100px;

			padding: 5px 0px;
		}

		.divEmpty {
			float: left;
			width: 10px;
			height: 100%;

		}

		.headerMD {			
			border-right: 1px solid #000;
			border-left: 1px solid #0a0a0a;
		}

	
		.headerMiddleOnes {
			float: left;
			border-right: 1px solid #000;
			border-left: 1px solid #646464;
		}

		.headerAZI {
			border-right: 1px solid #000;
			border-left: 1px solid #646464;
		}

		.headerEmpty {
			border-left: 1px solid #646464;
		}

	#theAddPathContainer {
		width: 100%;
		background: #ddd;
	}
		.wellPathInfoBoxContainer {
			float: left;
			height: 36px;
			width: 1350px;
			border-top: 1px solid #000;
			border-bottom: 1px solid #666;
			
			background: #ddd;
			background : -webkit-gradient(linear, center bottom, center top, from(#949494), to(#f5f5f5) );

		}
			.inactiveRowWellPathContainer {
				background: #8b8b8b;
			}

				.wellPathInputBoxContainer {
					float: left;
					border-left: 	1px solid #666;
					border-right: 	1px solid #fff;
					border-top: 	0px solid #fff;
					border-bottom: 	0px solid #666;



				}
					.divAddPathBtn {
						width: 75px;
					}

					.divEditPathBtn {
						width: 75px;
					}

					.divDonePathBtn {
						width: 75px;
					}
	

#theConfigurationPanel {
	height: 100px;
	width: 400px;
	float: left;
	background: -webkit-gradient(linear, center bottom, center top, from(#141414), to(#5A5A5A) );
	overflow: auto;

	text-align: left;
	border-top: 1px solid #000;
}
	.settingsLargerDIVforTitle {
		clear: both;
		width: 370px;
		height: 20px;
		margin: 5px 0px 0px 10px;
		
		padding: 3px 0px 0px 0px;
	}

	.settingsLargerDIV {
		clear: both;
		width: 357px;
		height: 35px;
		margin: 5px 0px 0px 25px;
		
		padding: 3px 0px 0px 0px;		
	}

	.settingsMediumDIV {
		clear: both;
		width: 357px;
		height: 35px;
		margin: 5px 0px 0px 10px;
		
		padding: 25px 0px 0px 0px;
	}

	.settingsSmallerDIV {
		float: left;
		height: 26px;
		margin: 3px 0px 0px 3px;
		
		padding: 3px 0px 0px 0px;		
	}
		.settingColorText {
			width: 47px;
		}

		.settingOpacityText {
			width: 65px;
		}

	.settingsInputContainerDIV {
		float: left;
		width: 60px;
		height: 26px;
		margin: 3px 0px 0px 10px;
		
		padding:0;
		
	}
		.settingColorOkBtn {
			float: left;

			
			background: #2e68f2; /* Old browsers */
			background: -moz-linear-gradient(top,  #2e68f2 0%, #7db9e8 0%, #8195ef 0%, #1e5799 100%, #207cca 100%); /* FF3.6+ */
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#2e68f2), color-stop(0%,#7db9e8), color-stop(0%,#8195ef), color-stop(100%,#1e5799), color-stop(100%,#207cca)); /* Chrome,Safari4+ */
			background: -webkit-linear-gradient(top,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* Chrome10+,Safari5.1+ */
			background: -o-linear-gradient(top,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* Opera 11.10+ */
			background: -ms-linear-gradient(top,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* IE10+ */
			background: linear-gradient(to bottom,  #2e68f2 0%,#7db9e8 0%,#8195ef 0%,#1e5799 100%,#207cca 100%); /* W3C */
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2e68f2', endColorstr='#207cca',GradientType=0 ); /* IE6-9 */


		}

		.theSlider {
			width: 140px;
			height: 10px;
			float: left;
			margin-left: 20px;
			margin-top: 12px;

		}
			.opacityValue {
				position: relative;
				top: -24px;
				left: -20px;
				color: #000;
				font-size: 10px;
				z-index: -1;
			}

			/* Customizing the Slider Look and feel*/
			
			.noUi-handle {
				height: 30px;
				width: 30px;
				margin-top: -10px;
				font-size: 10px;
				color: #000;

				padding: 6px 0 0 4px;
			}
			

	.settingSeparatorLine {
		height: 0px;
		width: 383px;
		border-top: 1px solid #333;
		border-bottom: 1px solid #555;
		margin: 9px 0;
	}


#theContainer {
	float: left;
	
	border: 1px solid #000000;
}





/*#######################################################*/
/*############ modifying jQuery UI ######################*/
/*#######################################################*/

.ui-state.focus {
	border: 0px solid #000;
}

.ui-button-text-only .ui-button-text {
	padding: 0px 10px 0px 10px;
}


		</style>


{% endblock %}

{% block scripts %}
		
		<script src="{{ STATIC_URL }}/js/3D/wellvis_model.js"></script>
		<script src="{{ STATIC_URL }}/js/3D/wellvis_controller.js"></script>
		<script src="{{ STATIC_URL }}/js/3D/wellvis_math.js"></script>
		<script src="{{ STATIC_URL }}/js/3D/wellvis_3D.js"></script>


		<script src="{{ STATIC_URL }}/js/3D/three.min.js"></script>

		<script src="{{ STATIC_URL }}/js/3D/TrackballControls-Modified.js"></script>

		<script src="{{ STATIC_URL }}/js/3D/Detector.js"></script>
		<script src="{{ STATIC_URL }}/js/jquery-2.0.3.min.js"></script>
		<script src="{{ STATIC_URL }}/js/jquery-ui.js"></script>
		<script src="{{ STATIC_URL }}js/jquery-cookie.js"></script>
		<script src="{{ STATIC_URL }}js/jquery.growl.js"></script>
		<script src="{{ STATIC_URL }}js/ajax-proxy.js"></script>
	

		<!-- The Color Picker -->
		<script src='{{ STATIC_URL }}/js/spectrum.js'></script>
		
		<!-- The Slider-->
		<script src="{{ STATIC_URL }}/js/jquery.nouislider.min.js"></script>

<script type="text/javascript">
	//==< for browser logs >===
	function colorTrace(msg, color) {
		console.log("%c" + msg, "color:" + color + ";font-weight:bold;");
	}



	//==|| Browser log for the RowData objects
	function logValues(obj, color) {						
		colorTrace( "MD = " 	+ obj.theMD 	+ "\t\t CL = " 	+ obj.theCL , color );
		colorTrace( "INC = " 	+ obj.theINC 	+ "\t\t AZI = "	+ obj.theAZI 		+ "\t\t TVD = "	+ obj.theTVD 	, color);
		colorTrace( "X = " 		+ obj.theX		+ "\t\t Y = " 	+ obj.theY 			+ "\t\t Z = " 	+ obj.theZ 		, color);
		colorTrace( "NS = " 	+ obj.theNS 	+ "\t\t EW = " 	+ obj.theEW 		+ "\t Vsec = " + obj.theVsec 	, color);
		colorTrace( "Dogleg = " + obj.theDogleg + "\t\t Build = " + obj.theBuild 	+ "\t\t Turn = " + obj.theTurn 	, color);
		colorTrace( "SecType = " + obj.theSecType, color);

	}


</script>
<script type="text/javascript">

//==|| The well's primary key
var well_pk = {{ wellpk }}


//========================
//==|| the well's data 
//========================
var theWellJSONdata = get_wellpath({{ wellpk }});


colorTrace("theWellJSONdata = " +  JSON.stringify(theWellJSONdata), "Green");



var newWellJSONdata = {
	"maxX"		: 	1000,
	"maxY"		: 	1000,
	"minX"		:	-1000,
	"minY"		:	-1000,
	"theZ"		: 	1500,
	"theUnit"	: 	500,
	"theValues"	: 	[]
};



var someWellJSONdata = {
	"maxX"		: 	1000,
	"maxY"		: 	1000,
	"minX"		:	-1000,
	"minY"		:	-1000,
	"theZ"		: 	1500,
	"theUnit"	: 	500,
	"theValues"	: 	[
		{
			"theMD" 	: 100,
			"theCL"		: 100,
			"theINC" 	: 0,
			"theAZI"	: 0,
			"theTVD"	: 100,
			"itsX" 		: 0,
			"itsY" 		: 0,
			"itsZ" 		: 100,
			"itsNS"		: 0,
			"itsEW"		: 0,
			"itsVsec"	: 100,
			"theDogleg" : 0,
			"theBuild"	: 0,
			"theTurn"	: 0,
			"theSecType": "Tangent",
			"thePoints" :[
				{
					"x" 	: 10,
					"y" 	: 10,
					"z" 	: 10
				},
				{
					"x" 	: 20,
					"y" 	: 20,
					"z" 	: 20
				}

			]
		},
		{
			"theMD" 	: 200,
			"theCL"		: 100,
			"theINC" 	: 10,
			"theAZI"	: 0,
			"theTVD"	: 197.81,
			"itsX" 		: 17.36,
			"itsY" 		: 0,
			"itsZ" 		: 198.48,
			"itsNS"		: 17.36,
			"itsEW"		: 0,
			"itsVsec"	: 198.48,
			"theDogleg" : 0,
			"theBuild"	: 0,
			"theTurn"	: 0,
			"theSecType": "M1 - Inc",
			"thePoints" :[
				{
					"x" 	: 10,
					"y" 	: 10,
					"z" 	: 10
				},
				{
					"x" 	: 20,
					"y" 	: 20,
					"z" 	: 20
				}

			]
		}
	]
};



//theWellJSONdata = someWellJSONdata;

//==|| Save the wellpath
//save_wellpath(well_pk, newWellJSONdata);



//==|| For the empty 3D module 
// var theDefaultWellJSONdata =	{
// 	"minX"	: -100,
// 	"maxX"	: 100,
// 	"minY"	: -100,
// 	"maxY"	: 100,
// 	"theZ" 	: 150,
// 	"theUnit" : 50,
// 	"theValues" : []
// };


//====================================
//==|| The 3D module setting
//====================================
var theDefaultSettingsJSONdata = get_3dconfig();



//==|| For Default Settings
//==|| These are the setting different components of our 3D Module
/*
var theDefaultSettingsJSONdata =	{
	"theSceneColor"								: "#000000",
	"theWellLineColor"							: "#FFFF00",
	"theWellLineOpacity"						: 1,
	"theXY_PlaneOutlineMaterialColor"			: "#FF0000",
	"theXY_PlaneOutlineMaterialLineOpacity"		: 1,
	"theXY_PlaneGridLinesMaterialColor"			: "#777777",
	"theXY_PlaneGridLinesMaterialLineOpacity"	: 1,
	"theXY_PlaneAxisLineMaterialColor"			: "#FFFFFF",
	"theXY_PlaneAxisLineMaterialLineOpacity"	: 1,
	"theXZ_PlaneOutlineMaterialColor"			: "#0000FF",
	"theXZ_PlaneOutlineMaterialLineOpacity"		: 1,
	"theXZ_PlaneGridLinesMaterialColor"			: "#777777",
	"theXZ_PlaneGridLinesMaterialLineOpacity"	: 1,
	"theXZ_PlaneAxisLineMaterialColor"			: "#FFFFFF",
	"theXZ_PlaneAxisLineMaterialLineOpacity"	: 1,
	"theYZ_PlaneOutlineMaterialColor" 			: "#00FF00",
	"theYZ_PlaneOutlineMaterialLineOpacity"		: 1,
	"theYZ_PlaneGridLinesMaterialColor" 		: "#777777",
	"theYZ_PlaneGridLinesMaterialLineOpacity"	: 1,
	"theYZ_PlaneAxisLineMaterialColor"			: "#FFFFFF",
	"theYZ_PlaneAxisLineMaterialLineOpacity"	: 1,
	"theLabelColor" 							: "#FFFFFF",
	"theLabelFontSize"							: 500,
	"theLabelOpacity"							: 1,	
	"theArrowNorthColor" 						: "#FFFFFF",
	"theArrowNorthOpacity"						: 1,
	"screenCenterSignColor" 					: "#FFFFFF",
	"screenCenterSignOpacity" 					: 1
};


//==|| Save the Configuration Setting
save_3dconfig(theDefaultSettingsJSONdata);

*/

</script>

<script type="text/javascript">


	if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

	//=============================
	//==|| The Main Variables ||===
	//=============================


	var WELLVIS = {};


	WELLVIS.theContainer = $('#theContainer');
	
	WELLVIS.theCamera;
	WELLVIS.theCameraTarget;

	WELLVIS.theControls;

	WELLVIS.theScene;
	WELLVIS.theSceneColor = "#000";//"Black"; //0x000000;

	WELLVIS.theRenderer;

	//==|| The Browser window/screen dimension
	var theScreenWidth = window.innerWidth;
  	var theScreenHeight = window.innerHeight;
  	
  	colorTrace("theScreen Dimension = " + theScreenWidth + " X " + theScreenHeight, "Green");

  	//=========================================================
   	//==|| The Default Values ||===============================
   	//=========================================================

   	//==|| The widht and height for the 3D Module Area

   	WELLVIS.theWidth 	= theScreenWidth - 446 - 8; //418 	//==|| Minus the Left Panel width and area taken by margin
   	WELLVIS.theHeight 	= theScreenHeight - 60 - 100; 		//==|| Minus the Area taken by Top most Panels
  	
	//==|| The Axes-Plane Ranges
   	WELLVIS.minY = -100; 
   	WELLVIS.maxY = 100;
   	WELLVIS.minX = -100; 
   	WELLVIS.maxX = 100;
   	WELLVIS.theZ = 150;

   	//==|| The Unit for grids
   	WELLVIS.theUnit = 50;



   	//==|| the Main Object that would contain every other object in the scene
	WELLVIS.theMainObject = new THREE.Object3D();

	//==|| The WellPath
	WELLVIS.theWellPath = new THREE.Object3D();

	//==|| Stores the lines that make up the Well Path
	WELLVIS.theWellPathList = new Array();


	//==|| The three main Planes
   	WELLVIS.theYZ_Plane = new THREE.Object3D();
   	WELLVIS.theXZ_Plane = new THREE.Object3D();
   	WELLVIS.theXY_Plane = new THREE.Object3D();


   	//==|| The Arrow to North
	WELLVIS.theArrowNorth;
	WELLVIS.theArrowNorthmaterial; 
	WELLVIS.theArrowNorthgeo;
	WELLVIS.theArrowNorthColor 		= "#FFFFFF";
	WELLVIS.theArrowNorthOpacity 	= 1;	
  	WELLVIS.theArrowNorth_Margin 	= 450; //==|| How far it is from the XY-Plane
  	WELLVIS.theArrowNorth_Width 	= 50;	//==|| How wide is it spread NOT length

	
	   	//==|| The YZ-Plane Childrens
	WELLVIS.theYZ_PlaneOutline; 	
	WELLVIS.theYZ_PlaneOutlineGeo; 		
	WELLVIS.theYZ_PlaneOutlineMaterial;
	WELLVIS.theYZ_PlaneGridLines;
	WELLVIS.theYZ_PlaneGridLinesGeo;
	WELLVIS.theYZ_PlaneGridLinesMaterial;
	WELLVIS.theYZ_PlaneAxisLine;
	WELLVIS.theYZ_PlaneAxisLineGeo;
	WELLVIS.theYZ_PlaneAxisLineMaterial;
	WELLVIS.theYZ_PlaneOutlineMaterialColor 		= 0x00FF00;
	WELLVIS.theYZ_PlaneOutlineMaterialLineWidth 	= 1;
	WELLVIS.theYZ_PlaneOutlineMaterialLineOpacity 	= 1;
	WELLVIS.theYZ_PlaneGridLinesMaterialColor 		= 0x333333;
	WELLVIS.theYZ_PlaneGridLinesMaterialLineWidth 	= 1;
	WELLVIS.theYZ_PlaneGridLinesMaterialLineOpacity	= 1;
	WELLVIS.theYZ_PlaneAxisLineMaterialColor 		= 0xAAAAAA;
	WELLVIS.theYZ_PlaneAxisLineMaterialLineWidth 	= 1;
	WELLVIS.theYZ_PlaneAxisLineMaterialLineOpacity 	= 1;
	 	//==|| The YZ-Plane Grids
	WELLVIS.theYZ_PlaneGrids =  new THREE.Object3D();


		//==|| The XZ-Plane Childrens
	WELLVIS.theXZ_PlaneOutline;
	WELLVIS.theXZ_PlaneOutlineGeo;
	WELLVIS.theXZ_PlaneOutlineMaterial;
    WELLVIS.theXZ_PlaneGridLines;
    WELLVIS.theXZ_PlaneGridLinesGeo;
    WELLVIS.theXZ_PlaneGridLinesMaterial;
    WELLVIS.theXZ_PlaneAxisLine;
    WELLVIS.theXZ_PlaneAxisLineGeo;
    WELLVIS.theXZ_PlaneAxisLineMaterial;
	WELLVIS.theXZ_PlaneOutlineMaterialColor 		= 0xFF0000;
	WELLVIS.theXZ_PlaneOutlineMaterialLineWidth 	= 1;
	WELLVIS.theXZ_PlaneOutlineMaterialLineOpacity 	= 1;
	WELLVIS.theXZ_PlaneGridLinesMaterialColor 		= 0x333333;
	WELLVIS.theXZ_PlaneGridLinesMaterialLineWidth 	= 1;
	WELLVIS.theXZ_PlaneGridLinesMaterialLineOpacity	= 1;
	WELLVIS.theXZ_PlaneAxisLineMaterialColor 		= 0xAAAAAA;
	WELLVIS.theXZ_PlaneAxisLineMaterialLineWidth 	= 1;
	WELLVIS.theXZ_PlaneAxisLineMaterialLineOpacity 	= 1;
	 	//==|| The XZ-Plane Grids
	WELLVIS.theXZ_PlaneGrids =  new THREE.Object3D();


		//==|| The XY-Plane Children
    WELLVIS.theXY_PlaneOutline;
    WELLVIS.theXY_PlaneOutlineGeo;
    WELLVIS.theXY_PlaneOutlineMaterial;
    WELLVIS.theXY_PlaneGridLines;
    WELLVIS.theXY_PlaneGridLinesGeo;
    WELLVIS.theXY_PlaneGridLinesMaterial;
    WELLVIS.theXY_PlaneAxisLine;
    WELLVIS.theXY_PlaneAxisLineGeo;
    WELLVIS.theXY_PlaneAxisLineMaterial;
	WELLVIS.theXY_PlaneOutlineMaterialColor 		= 0x0000FF;
	WELLVIS.theXY_PlaneOutlineMaterialLineWidth 	= 1;
	WELLVIS.theXY_PlaneOutlineMaterialLineOpacity 	= 1;
	WELLVIS.theXY_PlaneGridLinesMaterialColor 		= 0x333333;
	WELLVIS.theXY_PlaneGridLinesMaterialLineWidth 	= 1;
	WELLVIS.theXY_PlaneGridLinesMaterialLineOpacity = 1;
	WELLVIS.theXY_PlaneAxisLineMaterialColor 		= 0xAAAAAA;
	WELLVIS.theXY_PlaneAxisLineMaterialLineWidth 	= 1;
	WELLVIS.theXY_PlaneAxisLineMaterialLineOpacity 	= 1;
	 	//==|| The XY-Plane Grids
	WELLVIS.theXY_PlaneGrids =  new THREE.Object3D();


	//==|| The state of the grids
	WELLVIS.planesAreVisible = true;

 	//==|| The state of the grids
   	WELLVIS.gridIsVisible = true;

   	//==|| The state of the rotation point
    WELLVIS.rotationPointIsVisible = true;

   	//==|| The state of the Labels
   	WELLVIS.labelsAreVisible = true;

   	//==|| The state of the well paths 
   	WELLVIS.wellPathIsVisible = true;

   	//==|| The state of the Left Panel
   	WELLVIS.leftPanelIsVisible = true;


   	//==|| The center cursor/sign 
	WELLVIS.theScreenCenter;
	//==|| The length of each arm of the sign
   	WELLVIS.centerSignLength = 100;
   	//==|| The visibility status of the screen center sign
   	WELLVIS.screenCenterIsVisible = true;
   	//==|| The Color of the Screen Center Sign
   	WELLVIS.screenCenterSignColor = 0xEEEEEE;
   	//==|| The Opacity of the Screen Center / The center of Rotation
   	WELLVIS.screenCenterSignOpacity = 1;


   	//==|| Stores the values/labels for the grids
   	WELLVIS.theXZ_PlaneLabels = new THREE.Object3D();
   	WELLVIS.theXY_PlaneLabels = new THREE.Object3D();

   	WELLVIS.theLabelColor = "#FFFFFF";
   	WELLVIS.theLabelFont = "Arial";
   	WELLVIS.theLabelOpacity = 1.0;
   	WELLVIS.theLabelFontSize = 60;

   	//==|| The distance between the Axes-Plane outline and the grid value/label
   	WELLVIS.theLabelMargin = 200;



   	//==|| The Previous point - initially at the origin
   	WELLVIS.thePreviousPoint = new THREE.Vector3(0,0,0); 

   	//==|| The no. of well path lines in the model
   	WELLVIS.noOfWellPathLines = 0;

   	WELLVIS.theWellLineColor = 0x4045ff;
   	WELLVIS.theWellLineOpacity = 1;

	WELLVIS.theWellPathArray = new Array();



//####################################################################################################################################
//#########################################################[ DOM Ready ]##############################################################
//####################################################################################################################################
$(document).ready(function() {

	//==|| initializaton 
	init();
	//==|| set up the animation
	animate(); 


	//==|| Read the well JSON data and construct the well path from it.
	readWellJSONdata(theWellJSONdata);
	//readWellJSONdata(theDefaultWellJSONdata); //==|| The Default empty 3D Well Module


	//==Read the setting for 3D module
	readSettings(theDefaultSettingsJSONdata);


	$("#thePathsDetailContainer").css({"height" : WELLVIS.theHeight + 2 - 45});
	$("#theConfigurationPanel").css({"height": WELLVIS.theHeight + 2 - 45});

	WELLVIS.theContainer.css({"width" :  WELLVIS.theWidth });
	WELLVIS.theContainer.css({"height" :  WELLVIS.theHeight});


	//==|| Left Panel will be Tabbed
	$(function() {
		$( "#theTabs" ).tabs();
	});


	//=========================
	//==|| Toggle Buttons ||===
	//=========================

	//==|| Register the Toggle button event listener
	//==|| for the Axes planes
	registerTogglePlanes();


	//==|| Register the Toggle button event listener
	//==|| for the Grids in each of the Axes planes
	registerToggleGrids();

	//==|| Register the Toggle button event listener
	//==|| for the Central Rotation Point/Icon/Symbol
	registerToggleRotationPoint();


	//==|| Register the Toggle button event listener
	//==|| for the Labels in each of the Axes Planes
	registerToggleLabels();

	//==|| Register the Toggle button event listener
	//==|| for the Well path
	registerToggleWellPath();


	//==|| Register the Toggle button event listener
	//==|| for the Left Panel
	registerToggleShowHideLeftPanel();



/*
	//==|| Register the button press and release effect event listener
	registerButtonPressReleaseEffects();

	//==|| Register the Add path button event listener
	//==|| for the Add button in the Well Paths Tab in Left Panel
	registerAddPathButton();

	//==|| Register the Edit Path button event listener
	//==|| for the Edit button in the Well Paths Tab in Left Panel
	registerEditPathButton();

*/



}); //==|| dom ready ||========
//################################################################################################################################################
//################################################################################################################################################
//################################################################################################################################################




</script>
<script type="text/javascript">


//==|| Initialization -  the first method that set ups the entire 3D module
function init() {

	//==|| The Camera
	WELLVIS.theCamera = new THREE.PerspectiveCamera( 45, WELLVIS.theWidth / WELLVIS.theHeight, 1, 10000 );
   
    WELLVIS.theCamera.position.x = -3350; 	//350; //==|| This is our zoom now
    WELLVIS.theCamera.position.y = 1285;	//285;
	WELLVIS.theCamera.position.z = -1055;	//-55;

    //==| Flip the camera so that the Z is pointing downwards rather than upwards
    WELLVIS.theCamera.up.set(0, 0, -1 ); 

   	
	//==|| The World / The Scene
	WELLVIS.theScene = new THREE.Scene();
	
	//==|| The Renderer
	WELLVIS.theRenderer = new THREE.WebGLRenderer( { antialias: true } );
	WELLVIS.theRenderer.setSize( WELLVIS.theWidth, WELLVIS.theHeight );

	//==|| Add Axes Planes to the scene
	addAxesPlanes();
	

	//==|| The Target for camera to rotate on -  this is the center of rotation - center of the screen
   	WELLVIS.theCameraTarget = new THREE.Vector3(0, -28, 810);

	//==|| Create a sign at the center of the screen - center of rotation
	createScreenCenter(		WELLVIS.theCameraTarget.x, 
							WELLVIS.theCameraTarget.y, 
							WELLVIS.theCameraTarget.z, 
							WELLVIS.centerSignLength, 
							WELLVIS.screenCenterSignColor, 
							WELLVIS.screenCenterSignOpacity
						);
		

    //==|| attach the render-supplied DOM element
    WELLVIS.theContainer.append(WELLVIS.theRenderer.domElement);


    //==|| Add Trackball controls	
	addTrackballControls();

	//==|| On window resize call the function onWindowResize()
	window.addEventListener( 'resize', onWindowResize, false );

}


</script>

<script type="text/javascript">


//######################################################################################################################################
//######################################################################################################################################
//####################   #########   ###           ####        #####   #######   ####         ##########################################
//#####################   #######   ########   ########   ##########   #######   ###    ################################################
//######################   #####   #########   ########      #######   #######   ####         ##########################################
//#######################   ###   ##########   ########   ##########   #     #   ###########   #########################################
//########################   #   ###########   ########   ##########      #      ##########    #########################################
//#########################     ########           ####         ####     ###     ####         ##########################################
//######################################################################################################################################
//######################################################################################################################################




//==|| This checks if the point entered in the text-boxes is fine
//==|| This receives the current active row no (by active row it means the row in the table
//==|| in which the text input is active ) which is used to check each of the inputs
//==|| Currently it only checks if the inputs are non-empty or not.
//==|| later need to add the features like adding 0 automatically when nothing is there
//==|| when there are non-numbers, change them to 0 or show some message saying false input
function isPointOkToAdd(noOfWellPathLines) {


	var noOfWellPathLinesStr = changeNoOfWellPathLinesIntoString(noOfWellPathLines);
	
	colorTrace("noOfWellPathLinesStr" + noOfWellPathLinesStr, "Green");

	//==|| Checks if the input fields are empty 
	if($("#valueMD_" + noOfWellPathLinesStr).val().length == 0 ) {
    	return false;
    }

	if($("#valueINC_" + noOfWellPathLinesStr).val().length == 0 ) {
    	return false;
    }

    if($("#valueAZI_" + noOfWellPathLinesStr).val().length == 0 ) {
    	return false;
    }


    //==|| yah it's perfectly fine to add the point
	return true;
}



//==|| for the toggle buttons, add/remove the pressedBtn class for the Pressed or Released effect
function registerButtonPressReleaseEffects() {

	$(".btn").mousedown(function(){
		$(this).addClass("pressedBtn");
	});

	$(".btn").mouseup(function(){
		$(this).removeClass("pressedBtn");
	});

}


//==|| Show/hide left panel
function registerToggleShowHideLeftPanel() {
	$("#showHideLeftPanelBtn").click(function (){
		if(WELLVIS.leftPanelIsVisible) {
			WELLVIS.leftPanelIsVisible = false;
			$("#theTabs").css({"display":"none"});
			$("#showHideLeftPanelButtonContainer").css({"left":"15px"});
			$("#showHideLeftPanelBtn").find(".ui-button-text").text("Show");

		}
		else {
			WELLVIS.leftPanelIsVisible = true;
			$("#theTabs").css({"display":"block"});
			$("#showHideLeftPanelButtonContainer").css({"left":"418px"});
			$("#showHideLeftPanelBtn").find(".ui-button-text").text("Hide");
		}

	
		onWindowResize();

	});

}


//==|| Show hide the Axes planes + North Arrow
function registerTogglePlanes() {	

	//==|| Add the click event ||===
	$("#toggleAxesPlanes").click(function(){

		 //$('a#button').click(function(){
       		 $(this).toggleClass("inactiveBtn");
   		 //});

		if(WELLVIS.planesAreVisible) { 
			WELLVIS.planesAreVisible = false;
			
			WELLVIS.theMainObject.remove(WELLVIS.theXY_Plane);
			WELLVIS.theMainObject.remove(WELLVIS.theYZ_Plane);
			WELLVIS.theMainObject.remove(WELLVIS.theXZ_Plane);

			WELLVIS.theMainObject.remove(WELLVIS.theArrowNorth);

		}
		else {
			WELLVIS.planesAreVisible = true;			
	
			WELLVIS.theMainObject.add(WELLVIS.theXY_Plane);
			WELLVIS.theMainObject.add(WELLVIS.theYZ_Plane);
			WELLVIS.theMainObject.add(WELLVIS.theXZ_Plane);

			WELLVIS.theMainObject.add(WELLVIS.theArrowNorth);

		}

			//==|| Lets see the changes
			render();

	});


}


//==|| Show hide the grids in each of the Axes planes
function registerToggleGrids() {

	//==|| Add the click event ||===
	$("#toggleGridBtn").click(function(){

		 //$('a#button').click(function(){
       		 $(this).toggleClass("inactiveBtn");
   		 //});

		if(WELLVIS.gridIsVisible) { 
			colorTrace("Grid is going to be invisible", "red");
			WELLVIS.gridIsVisible = false;

			//==|| Hide grids but not the axis lines
			WELLVIS.theYZ_PlaneGrids.remove(WELLVIS.theYZ_PlaneGridLines);
			WELLVIS.theXZ_PlaneGrids.remove(WELLVIS.theXZ_PlaneGridLines);
			WELLVIS.theXY_PlaneGrids.remove(WELLVIS.theXY_PlaneGridLines);


		}
		else {
			colorTrace("Grid is going to be visible","green");
			WELLVIS.gridIsVisible = true;
			
		
			//==|| Hide grids but not the axis lines
			WELLVIS.theYZ_PlaneGrids.add(WELLVIS.theYZ_PlaneGridLines);
			WELLVIS.theXZ_PlaneGrids.add(WELLVIS.theXZ_PlaneGridLines);
			WELLVIS.theXY_PlaneGrids.add(WELLVIS.theXY_PlaneGridLines);

		}

		//==|| Lets see the changes
		render();

	});


}


//==|| Show hide the central icon, Center of Rotation
function registerToggleRotationPoint() {

	//==|| Add the click event ||===
	$("#toggleRotationCenterSymbol").click(function(){

		 //$('a#button').click(function(){
       		 $(this).toggleClass("inactiveBtn");
   		 //});

		if(WELLVIS.rotationPointIsVisible) { 
			colorTrace("Rotation Point is going to be invisible", "red");
			WELLVIS.rotationPointIsVisible = false;

			WELLVIS.theMainObject.remove(WELLVIS.theScreenCenter);

		}
		else {
			colorTrace("Rotation Point is going to be visible","green");
			WELLVIS.rotationPointIsVisible = true;
			
			WELLVIS.theMainObject.add(WELLVIS.theScreenCenter);

		}

			//==|| Lets see the changes
			render();

	});



}


//==|| Show hide  the labels/values in the Axes planes
function registerToggleLabels() {

	//==|| Add the click event ||===
	$("#toggleLabels").click(function(){

		 //$('a#button').click(function(){
       		 $(this).toggleClass("inactiveBtn");
   		 //});

		if(WELLVIS.labelsAreVisible) { 
			WELLVIS.labelsAreVisible = false;
			
			WELLVIS.theXZ_Plane.remove(WELLVIS.theXZ_PlaneLabels);
			WELLVIS.theXY_Plane.remove(WELLVIS.theXY_PlaneLabels);

		}
		else {
			WELLVIS.labelsAreVisible = true;
			
			WELLVIS.theXZ_Plane.add(WELLVIS.theXZ_PlaneLabels);
			WELLVIS.theXY_Plane.add(WELLVIS.theXY_PlaneLabels);

		}

		//==|| Lets see the changes
		render();


	});


}


//==|| Show hide the Well path
function registerToggleWellPath() {

	//==|| Add the click event ||===
	$("#toggleWellPath").click(function(){

		 //$('a#button').click(function(){
       		 $(this).toggleClass("inactiveBtn");
   		 //});

		if(WELLVIS.wellPathIsVisible) { 
			WELLVIS.wellPathIsVisible = false;
			
			WELLVIS.theMainObject.remove(WELLVIS.theWellPath);

		}
		else {
			WELLVIS.wellPathIsVisible = true;
			
			WELLVIS.theMainObject.add(WELLVIS.theWellPath);

		}


		//==|| Lets see the changes
		render();

	});

}


//==|| The Add button
function registerAddPathButton() {
	//==|| When the add button is clicked
	$(".addPathBtn").click(function() {
		colorTrace("Add the well", "green");



		//==|| If the Point is okay to add
		if(isPointOkToAdd(WELLVIS.noOfWellPathLines)) {
			colorTrace("Point is okay to add", "Green");

			//==|| Find the current table row no
			var noOfWellPathLinesStr = changeNoOfWellPathLinesIntoString(WELLVIS.noOfWellPathLines);
			colorTrace("noOfWellPathLinesStr = " + noOfWellPathLinesStr, "Blue");

			var selectedOption = $("#valueSecType_" + noOfWellPathLinesStr).val();
			

			//var optionSelected = $("option:selected", this);
    		//var valueSelected = this.value;


			//==|| Read the inputted values
			var newMD 		= $("#valueMD_"  	+ noOfWellPathLinesStr).val() - 0;
			var newCL 		= $("#valueCL_"  	+ noOfWellPathLinesStr).val() - 0;
			var newINC 		= $("#valueINC_"  	+ noOfWellPathLinesStr).val() - 0;
			var newAZI 		= $("#valueAZI_"  	+ noOfWellPathLinesStr).val() - 0;
			var newTVD 		= $("#valueTVD_"  	+ noOfWellPathLinesStr).val() - 0;
			var newX 		= $("#valueX_"  	+ noOfWellPathLinesStr).text() - 0;
			var newY 		= $("#valueY_" 		+ noOfWellPathLinesStr).text() - 0;
			var newZ 		= $("#valueZ_" 		+ noOfWellPathLinesStr).text() - 0;
			var newNS 		= $("#valueNS_"  	+ noOfWellPathLinesStr).val() - 0;
			var newEW 		= $("#valueEW_" 	+ noOfWellPathLinesStr).val() - 0;
			var newVsec 	= $("#valueVsec_" 	+ noOfWellPathLinesStr).val() - 0;
			var newDogleg 	= $("#valueDogleg_" + noOfWellPathLinesStr).val() - 0;
			var newBuild 	= $("#valueBuild_" 	+ noOfWellPathLinesStr).val() - 0;
			var newTurn 	= $("#valueTurn_" 	+ noOfWellPathLinesStr).val() - 0;

			
			var newRowData = new RowData(newMD, newCL, newINC, newAZI, newTVD, newX, newY, newZ, newNS, newEW, newVsec, newDogleg, newBuild, newTurn, selectedOption);
			
			colorTrace("Current row's values are", "Green");
			logValues(newRowData, "Blue");

			//==|| The previous row
			var preMD 		= 0;
			var preCL 		= 0;
			var preINC 		= 0;
			var preAZI 		= 0;
			var preTVD 		= 0;
			var preX 		= 0;
			var preY 		= 0;
			var preZ 		= 0;
			var preNS 		= 0;
			var preEW 		= 0;
			var preVsec 	= 0;
			var preDogleg 	= 0;
			var preBuild 	= 0;
			var preTurn 	= 0;
			var preSecType  = "";
			
			if(WELLVIS.noOfWellPathLines != 0){
				var preRowNo = 	WELLVIS.noOfWellPathLines - 1;
				var preRowNoStr = changeNoOfWellPathLinesIntoString(preRowNo);
				colorTrace("preRowNoStr = " + preRowNoStr, "Green");

				preMD  		= $("#valueMD_"  	+ preRowNoStr).val() - 0;
			 	preCL 		= $("#valueCL_"  	+ preRowNoStr).val() - 0;
				preINC 		= $("#valueINC_"  	+ preRowNoStr).val() - 0;
				preAZI 		= $("#valueAZI_"	+ preRowNoStr).val() - 0;
				preTVD 		= $("#valueTVD_"  	+ preRowNoStr).val() - 0;
				preX 		= $("#valueX_"  	+ preRowNoStr).text() - 0;
				preY 		= $("#valueY_"  	+ preRowNoStr).text() - 0;
				preZ 		= $("#valueZ_"  	+ preRowNoStr).text() - 0;
				preNS 		= $("#valueNS_"  	+ preRowNoStr).val() - 0;
				preEW 		= $("#valueEW_" 	+ preRowNoStr).val() - 0;
				preVsec 	= $("#valueVsec_" 	+ preRowNoStr).val() - 0;
				preDogleg 	= $("#valueDogleg_" + preRowNoStr).val() - 0;
				preBuild 	= $("#valueBuild_" 	+ preRowNoStr).val() - 0;
				preTurn 	= $("#valueTurn_" 	+ preRowNoStr).val() - 0;

				preSecType = $("#valueSecType_" + preRowNoStr).val();
			

			}


			var preRowData = new RowData(preMD, preCL, preINC, preAZI, preTVD, preX, preY, preZ, preNS, preEW, preVsec, preDogleg, preBuild, preTurn, preSecType);
			
			colorTrace("Previous row's values are", "Green");
			logValues(preRowData, "Blue");



			if(selectedOption == "secTypeTangent") {
				//========================================================================
				//================|| The Tangent calculation ||===========================
				//========================================================================
				newRowData = methodTangent(newRowData, preRowData);
				
				colorTrace("After Tangent calculation - Back at the station", "Black");
				logValues(newRowData, "Blue");
				

				//==|| Putting new dN, dE, dZ in the row				
				$("#valueCL_" 	+ noOfWellPathLinesStr).val(newRowData.theCL) - 0;
				$("#valueNS_"  	+ noOfWellPathLinesStr).val(newRowData.theNS) - 0;
				$("#valueEW_" 	+ noOfWellPathLinesStr).val(newRowData.theEW) - 0;
				$("#valueVsec_" + noOfWellPathLinesStr).val(newRowData.theVsec) - 0;
				$("#valueTVD_"  + noOfWellPathLinesStr).val(newRowData.theTVD) - 0;

				//==|| Putting new X, Y, Z in the hidden DIVs in the row
				$("#valueX_"  + noOfWellPathLinesStr).text(newRowData.theX) - 0;
				$("#valueY_"  + noOfWellPathLinesStr).text(newRowData.theY) - 0;
				$("#valueZ_"  + noOfWellPathLinesStr).text(newRowData.theZ) - 0;


			}
			else if(selectedOption == "secTypeM1INC") {
				
				//========================================================================
				//=============||   The M1-Inc Method   ||================================
				//========================================================================

				//==|| In case the Build and Turn are not equal
				if(Math.abs(newRowData.theBuild) != Math.abs(newRowData.theTurn)) {
					colorTrace(" Turn and Build are not equal", "Green");
					if(newRowData.theBuild != 0 && newRowData.theTurn != 0) {
						colorTrace("and Turn and Build are not 0", "Blue");
						newRowData = methodM1INC(newRowData, preRowData);
					}
					else if(newRowData.theBuild == 0) {
						colorTrace("But Build = 0", "Red");

						var n1 = duplicateThisRowData(newRowData);
						var n2 = duplicateThisRowData(newRowData);

						n1.theBuild = n1.theBuild + 0.001;
						n2.theBuild = n2.theBuild - 0.001;


						n1 = methodM1INC(n1, preRowData);
						n2 = methodM1INC(n2, preRowData);

						colorTrace("-- Taking the average values --", "Blue");
						//==|| Now we will take the average value
						newRowData.theMD = (n1.theMD + n2.theMD) / 2;
						newRowData.theCL = (n1.theCL + n2.theCL) / 2;
						newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
						newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

						newRowData.theX = (n1.theX + n2.theX) / 2;
						newRowData.theY = (n1.theY + n2.theY) / 2;
						newRowData.theZ = (n1.theZ + n2.theZ) / 2;

						newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
						newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
						newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

						newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

						logValues(newRowData, "Green");
					}
					else if(newRowData.theBuild == 0) {
						colorTrace("But Turn = 0", "Red");
						
						var n1 = duplicateThisRowData(newRowData);
						var n2 = duplicateThisRowData(newRowData);

						n1.theTurn = n1.theTurn + 0.001;
						n2.theTurn = n2.theTurn - 0.001;

						n1 = methodM1INC(n1, preRowData);
						n2 = methodM1INC(n2, preRowData);

						colorTrace("-- Taking the average values --", "Blue");
						//==|| Now we will take the average value
						newRowData.theMD = (n1.theMD + n2.theMD) / 2;
						newRowData.theCL = (n1.theCL + n2.theCL) / 2;
						newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
						newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

						newRowData.theX = (n1.theX + n2.theX) / 2;
						newRowData.theY = (n1.theY + n2.theY) / 2;
						newRowData.theZ = (n1.theZ + n2.theZ) / 2;

						newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
						newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
						newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

						newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

					}	
				}
				else { 
					colorTrace("### Turn and Build ARE equal ###", "RED");
					var n1 = duplicateThisRowData(newRowData);
					var n2 = duplicateThisRowData(newRowData);

					n1.theBuild = n1.theBuild + 0.01;
					n2.theBuild = n2.theBuild - 0.01;


					n1 = methodM1INC(n1, preRowData);
					n2 = methodM1INC(n2, preRowData);

					colorTrace("-- Taking the average values --", "Blue");
					//==|| Now we will take the average value
					newRowData.theMD = (n1.theMD + n2.theMD) / 2;
					newRowData.theCL = (n1.theCL + n2.theCL) / 2;
					newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
					newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

					newRowData.theX = (n1.theX + n2.theX) / 2;
					newRowData.theY = (n1.theY + n2.theY) / 2;
					newRowData.theZ = (n1.theZ + n2.theZ) / 2;

					newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
					newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
					newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

					newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

					logValues(newRowData, "Green");

				}


				//==|| Putting the calculated MD, AZI
				$("#valueMD_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theMD.toFixed(2))) - 0;
				$("#valueAZI_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theAZI.toFixed(2))) - 0;

				$("#valueTVD_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theTVD.toFixed(2))) - 0;

				//==|| Putting new dN, dE, dZ in the row				
				$("#valueCL_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theCL.toFixed(2))) - 0;
				$("#valueNS_"  	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theNS.toFixed(2))) - 0;
				$("#valueEW_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theEW.toFixed(2))) - 0;
				$("#valueVsec_" + noOfWellPathLinesStr).val(parseFloat(newRowData.theVsec.toFixed(2))) - 0;
				$("#valueDogleg_" + noOfWellPathLinesStr).val(parseFloat(newRowData.theDogleg.toFixed(2))) - 0;

				//==|| Putting new X, Y, Z in the hidden DIVs in the row
				$("#valueX_"  + noOfWellPathLinesStr).text(newRowData.theX) - 0;
				$("#valueY_"  + noOfWellPathLinesStr).text(newRowData.theY) - 0;
				$("#valueZ_"  + noOfWellPathLinesStr).text(newRowData.theZ) - 0;



				//==|| Now looping to make the curve

				var diffMD = newRowData.theMD - preRowData.theMD;
				var noOfPointsInBetween = parseInt(diffMD / 30); // with the difference of 30

				colorTrace("diffMD = " + diffMD + ",    no of Points in between =" + noOfPointsInBetween);

				var diffINC = newRowData.theINC - preRowData.theINC;
				var diffINCunit = diffINC / noOfPointsInBetween;

				var diffAZI = newRowData.theAZI - preRowData.theAZI;
				var diffAZIunit = diffAZI / noOfPointsInBetween;


				var diffB = newRowData.theBuild - preRowData.theBuild;
				var diffBunit = diffB / noOfPointsInBetween;

				var diffT = newRowData.theTurn - preRowData.theTurn;
				var diffTunit = diffT / noOfPointsInBetween;


				//var preData = preRowData;
				//var newData = newRowData;

				//==|| Stores the previous point
				var preData = duplicateThisRowData( preRowData ); 

				//==|| Stores the current point
				var newData = duplicateThisRowData(	newRowData );


				colorTrace("preData.theMD = " + preData.theMD + ", newData.theMD = " + newData.theMD, "RED");

				
				if(diffMD > 30) { 

					colorTrace("###############################", 'Black');
					colorTrace("## Now Let's draw the curve  ##", 'Black');
					colorTrace("###############################", 'Black');
					colorTrace("The Diff MD = " 	+ diffMD, "Blue");
					colorTrace("The diff INC = " 	+ diffINC + "     , diff INC unit = " + diffINCunit);
					//colorTrace("The diff AZI = " 	+ diffAZI + "     , diff AZI unit = " + diffAZIunit);
					//colorTrace("The diff Build = " 	+ diffB + "     , diff Build unit = " + diffBunit);
					//colorTrace("The diff Turn = " 	+ diffT + "     , diff Turn unit = "  + diffTunit);

					
					newData.theINC = preRowData.theINC + diffINCunit;

					for(var i = 1; i <= noOfPointsInBetween; i++) {
						
						//newRowData = methodTangent(newRowData, preRowData);						
						//newData = methodTangent(newData, preData);
						//newData = methodM1INC(newData, preData);
						if(Math.abs(newData.theBuild) != Math.abs(newData.theTurn)) {
							colorTrace(" Turn and Build are not equal", "Green");

							if(newData.theBuild != 0 && newData.theTurn !=0 ) {
								colorTrace("and the Build and the Turn are not 0", "Blue");
								newData = methodM1INC(newData, preData);
							}
							else if(newData.theBuild == 0){
								colorTrace("But the Build = 0", "RED");

								var n1 = duplicateThisRowData(newData);
								var n2 = duplicateThisRowData(newData);

								n1.theBuild = n1.theBuild + 0.001;
								n2.theBuild = n2.theBuild - 0.001;

								
								n1 = methodM1INC(n1, preData);
								n2 = methodM1INC(n2, preData);

								colorTrace("-- Taking the average values --", "Blue");
								//==|| Now we will take the average value
								newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
								newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
								newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
								newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

								newData.theX 	= (n1.theX + n2.theX) / 2;
								newData.theY 	= (n1.theY + n2.theY) / 2;
								newData.theZ 	= (n1.theZ + n2.theZ) / 2;

								newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
								newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
								newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

								newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

								logValues(newData, "Green");

							}
							else if(newData.theTurn == 0) {
								colorTrace("But the Turn = 0", "RED");

								var n1 = duplicateThisRowData(newData);
								var n2 = duplicateThisRowData(newData);

								n1.theTurn = n1.theTurn + 0.001;
								n2.theTurn = n2.theTurn - 0.001;

								
								n1 = methodM1INC(n1, preData);
								n2 = methodM1INC(n2, preData);

								colorTrace("-- Taking the average values --", "Blue");
								//==|| Now we will take the average value
								newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
								newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
								newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
								newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

								newData.theX 	= (n1.theX + n2.theX) / 2;
								newData.theY 	= (n1.theY + n2.theY) / 2;
								newData.theZ 	= (n1.theZ + n2.theZ) / 2;

								newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
								newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
								newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

								newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

								logValues(newData, "Green");
							}
						}
						else { 
							colorTrace("### Turn and Build ARE equal ###", "RED");
							var n1 = duplicateThisRowData(newData);
							var n2 = duplicateThisRowData(newData);

							n1.theBuild = n1.theBuild + 0.01;
							n2.theBuild = n2.theBuild - 0.01;

							
							n1 = methodM1INC(n1, preData);
							n2 = methodM1INC(n2, preData);

							colorTrace("-- Taking the average values --", "Blue");
							//==|| Now we will take the average value
							newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
							newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
							newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
							newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

							newData.theX 	= (n1.theX + n2.theX) / 2;
							newData.theY 	= (n1.theY + n2.theY) / 2;
							newData.theZ 	= (n1.theZ + n2.theZ) / 2;

							newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
							newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
							newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

							newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

							logValues(newData, "Green");

						}



						colorTrace("-- Back at the Station After M1-INC calculation --", "Black");
						logValues(newData, "Black");

						var theXis = newData.theX;
						var theYis = newData.theY;
						var theZis = newData.theZ;

						//==|| Add a new line
						addWellPath(theXis, theYis, theZis);
						checkRangesForPlanes(theXis, theYis, theZis);

						render();



						preData.theMD 	= newData.theMD;
						preData.theAZI 	= newData.theAZI;
						preData.theINC 	= newData.theINC;
						preData.theCL 	= newData.theCL;
						preData.theTVD 	= newData.theTVD;
						preData.theNS 	= newData.theNS;
						preData.theEW 	= newData.theEW;
						preData.theVsec = newData.theVsec;
						preData.theDogleg = newData.theDogleg;
						preData.theX 	= newData.theX;
						preData.theY 	= newData.theY;
						preData.theZ 	= newData.theZ;



						//newData.theMD = newData.theMD + 30;
						newData.theINC = newData.theINC + diffINCunit;
						//newData.theAZI = newData.theAZI + diffAZIunit;

						//newData.theBuild = newData.theBuild + diffBunit;
						//newData.theTurn = newData.theTurn + diffTunit;


					}


				} //if diff MD > 30
				else {
					colorTrace("dMD not enough to draw point in between", "RED");
				}





			}
			else if(selectedOption == "secTypeM1AZI") {

				//========================================================================
				//==================||     The M1-Azi Method    ||========================
				//========================================================================

				colorTrace("## The M1- Azi method ##", "Blue");


				//==|| In case the Build and Turn are not equal
				if(Math.abs(newRowData.theBuild) != Math.abs(newRowData.theTurn)) {
					colorTrace(" Turn and Build are not equal", "Green");
					if(newRowData.theBuild != 0 && newRowData.theTurn != 0) {
						colorTrace(" and Turn and Build are not 0", "Blue");
						newRowData = methodM1AZI(newRowData, preRowData);
					}
					else if(newRowData.theBuild == 0) {
						colorTrace(" But Build = 0", "Red");

						var n1 = duplicateThisRowData(newRowData);
						var n2 = duplicateThisRowData(newRowData);

						n1.theBuild = n1.theBuild + 0.001;
						n2.theBuild = n2.theBuild - 0.001;

						n1 = methodM1AZI(n1, preRowData);
						n2 = methodM1AZI(n2, preRowData);

						colorTrace("-- Taking the average values --", "Blue");
						//==|| Now we will take the average value
						newRowData.theMD  = (n1.theMD  + n2.theMD)  / 2;
						newRowData.theCL  = (n1.theCL  + n2.theCL)  / 2;
						//newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
						newRowData.theINC = (n1.theINC + n2.theINC) / 2;
						newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

						newRowData.theX = (n1.theX + n2.theX) / 2;
						newRowData.theY = (n1.theY + n2.theY) / 2;
						newRowData.theZ = (n1.theZ + n2.theZ) / 2;

						newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
						newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
						newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

						newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

						colorTrace("----------------------------------");
						logValues(newRowData, "Green");
						colorTrace("----------------------------------");
					}
					else if(newRowData.theTurn == 0 ){
						colorTrace(" But Turn = 0", "Red");

						var n1 = duplicateThisRowData(newRowData);
						var n2 = duplicateThisRowData(newRowData);

						n1.theTurn = n1.theTurn + 0.001;
						n2.theTurn = n2.theTurn - 0.001;


						n1 = methodM1AZI(n1, preRowData);
						n2 = methodM1AZI(n2, preRowData);

						colorTrace("-- Taking the average values --", "Blue");
						//==|| Now we will take the average value
						newRowData.theMD  = (n1.theMD  + n2.theMD)  / 2;
						newRowData.theCL  = (n1.theCL  + n2.theCL)  / 2;
						//newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
						newRowData.theINC = (n1.theINC + n2.theINC) / 2;
						newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

						newRowData.theX = (n1.theX + n2.theX) / 2;
						newRowData.theY = (n1.theY + n2.theY) / 2;
						newRowData.theZ = (n1.theZ + n2.theZ) / 2;

						newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
						newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
						newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

						newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

						colorTrace("----------------------------------");
						logValues(newRowData, "Green");
						colorTrace("----------------------------------");
					}
				}
				else { 
					colorTrace("### Turn and Build ARE equal ###", "RED");
					var n1 = duplicateThisRowData(newRowData);
					var n2 = duplicateThisRowData(newRowData);

					n1.theBuild = n1.theBuild + 0.01;
					n2.theBuild = n2.theBuild - 0.01;


					n1 = methodM1AZI(n1, preRowData);
					n2 = methodM1AZI(n2, preRowData);

					colorTrace("-- Taking the average values --", "Blue");
					//==|| Now we will take the average value
					newRowData.theMD  = (n1.theMD  + n2.theMD)  / 2;
					newRowData.theCL  = (n1.theCL  + n2.theCL)  / 2;
					//newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
					newRowData.theINC = (n1.theINC + n2.theINC) / 2;
					newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

					newRowData.theX = (n1.theX + n2.theX) / 2;
					newRowData.theY = (n1.theY + n2.theY) / 2;
					newRowData.theZ = (n1.theZ + n2.theZ) / 2;

					newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
					newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
					newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

					newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

					colorTrace("----------------------------------");
					logValues(newRowData, "Green");
					colorTrace("----------------------------------");

				}


				//==|| Putting the calculated MD, AZI
				$("#valueMD_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theMD.toFixed(2))) - 0;
				$("#valueINC_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theINC.toFixed(2))) - 0;

				$("#valueTVD_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theTVD.toFixed(2))) - 0;

				//==|| Putting new dN, dE, dZ in the row				
				$("#valueCL_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theCL.toFixed(2))) - 0;
				$("#valueNS_"  	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theNS.toFixed(2))) - 0;
				$("#valueEW_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theEW.toFixed(2))) - 0;
				$("#valueVsec_" + noOfWellPathLinesStr).val(parseFloat(newRowData.theVsec.toFixed(2))) - 0;
				$("#valueDogleg_" + noOfWellPathLinesStr).val(parseFloat(newRowData.theDogleg.toFixed(2))) - 0;

				//==|| Putting new X, Y, Z in the hidden DIVs in the row
				$("#valueX_"  + noOfWellPathLinesStr).text(newRowData.theX) - 0;
				$("#valueY_"  + noOfWellPathLinesStr).text(newRowData.theY) - 0;
				$("#valueZ_"  + noOfWellPathLinesStr).text(newRowData.theZ) - 0;



				//==|| Now looping to make the curve

				var diffMD = newRowData.theMD - preRowData.theMD;
				var noOfPointsInBetween = parseInt(diffMD / 30); // with the difference of 30

				colorTrace("diffMD = " + diffMD + ",    no of Points in between =" + noOfPointsInBetween);

				var diffINC = newRowData.theINC - preRowData.theINC;
				var diffINCunit = diffINC / noOfPointsInBetween;

				var diffAZI = newRowData.theAZI - preRowData.theAZI;
				var diffAZIunit = diffAZI / noOfPointsInBetween;


				var diffB = newRowData.theBuild - preRowData.theBuild;
				var diffBunit = diffB / noOfPointsInBetween;

				var diffT = newRowData.theTurn - preRowData.theTurn;
				var diffTunit = diffT / noOfPointsInBetween;


				//var preData = preRowData;
				//var newData = newRowData;

				//==|| Stores the previous point
				var preData = duplicateThisRowData( preRowData ); 

				//==|| Stores the current point
				var newData = duplicateThisRowData(	newRowData );


				colorTrace("preData.theMD = " + preData.theMD + ", newData.theMD = " + newData.theMD, "RED");

				if(diffMD > 30) { 

					colorTrace("###############################", 'Black');
					colorTrace("## Now Let's draw the curve  ##", 'Black');
					colorTrace("###############################", 'Black');
					colorTrace("The Diff MD = " 	+ diffMD, "Blue");
					//colorTrace("The diff INC = " 	+ diffINC + "     , diff INC unit = " + diffINCunit);
					colorTrace("The diff AZI = " 	+ diffAZI + "     , diff AZI unit = " + diffAZIunit);
					//colorTrace("The diff Build = " 	+ diffB + "     , diff Build unit = " + diffBunit);
					//colorTrace("The diff Turn = " 	+ diffT + "     , diff Turn unit = "  + diffTunit);

					
					//newData.theINC = preRowData.theINC + diffINCunit;
					newData.theAZI = preRowData.theAZI + diffAZIunit;

					for(var i = 1; i <= noOfPointsInBetween; i++) {
						
						//newRowData = methodTangent(newRowData, preRowData);						
						//newData = methodTangent(newData, preData);
						//newData = methodM1AZI(newData, preData);
						if(Math.abs(newData.theBuild) != Math.abs(newData.theTurn)) {
							colorTrace(" Turn and Build are not equal", "Green");

							if(newData.theBuild != 0 && newData.theTurn != 0) {
								colorTrace("and the Turn and Build are not 0", "Blue");
								newData = methodM1AZI(newData, preData);
							}
							else if(newData.theBuild == 0) {
								colorTrace("But the Build = 0", "RED");

								var n1 = duplicateThisRowData(newData);
								var n2 = duplicateThisRowData(newData);

								n1.theBuild = n1.theBuild + 0.001;
								n2.theBuild = n2.theBuild - 0.001;

								
								n1 = methodM1AZI(n1, preData);
								n2 = methodM1AZI(n2, preData);

								colorTrace("-- Taking the average values --", "Blue");
								//==|| Now we will take the average value
								newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
								newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
								//newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
								newRowData.theINC = (n1.theINC + n2.theINC) / 2;
								newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

								newData.theX 	= (n1.theX + n2.theX) / 2;
								newData.theY 	= (n1.theY + n2.theY) / 2;
								newData.theZ 	= (n1.theZ + n2.theZ) / 2;

								newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
								newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
								newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

								newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

								logValues(newData, "Green");
							}
							else if(newData.theTurn == 0 ) {
								colorTrace("But the Turn = 0", "RED");

								var n1 = duplicateThisRowData(newData);
								var n2 = duplicateThisRowData(newData);

								n1.theTurn = n1.theTurn + 0.001;
								n2.theTurn = n2.theTurn - 0.001;

								
								n1 = methodM1AZI(n1, preData);
								n2 = methodM1AZI(n2, preData);

								colorTrace("-- Taking the average values --", "Blue");
								//==|| Now we will take the average value
								newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
								newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
								//newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
								newRowData.theINC = (n1.theINC + n2.theINC) / 2;
								newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

								newData.theX 	= (n1.theX + n2.theX) / 2;
								newData.theY 	= (n1.theY + n2.theY) / 2;
								newData.theZ 	= (n1.theZ + n2.theZ) / 2;

								newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
								newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
								newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

								newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

								logValues(newData, "Green");
							}
						}
						else { 
							colorTrace("### Turn and Build ARE equal ###", "RED");
							var n1 = duplicateThisRowData(newData);
							var n2 = duplicateThisRowData(newData);

							n1.theBuild = n1.theBuild + 0.01;
							n2.theBuild = n2.theBuild - 0.01;

							
							n1 = methodM1AZI(n1, preData);
							n2 = methodM1AZI(n2, preData);

							colorTrace("-- Taking the average values --", "Blue");
							//==|| Now we will take the average value
							newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
							newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
							//newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
							newRowData.theINC = (n1.theINC + n2.theINC) / 2;
							newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

							newData.theX 	= (n1.theX + n2.theX) / 2;
							newData.theY 	= (n1.theY + n2.theY) / 2;
							newData.theZ 	= (n1.theZ + n2.theZ) / 2;

							newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
							newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
							newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

							newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

							logValues(newData, "Green");

						}



						colorTrace("-- Back at the Station After M1 - AZI calculation --", "Black");
						logValues(newData, "Black");

						var theXis = newData.theX;
						var theYis = newData.theY;
						var theZis = newData.theZ;


						colorTrace("About to draw for curve x = " + theXis + ", y = " + theYis + ", z = " + theZis, "Green");
						//==|| Add a new line
						addWellPath(theXis, theYis, theZis);
						checkRangesForPlanes(theXis, theYis, theZis);

						render();



						preData.theMD 	= newData.theMD;
						preData.theAZI 	= newData.theAZI;
						preData.theINC 	= newData.theINC;
						preData.theCL 	= newData.theCL;
						preData.theTVD 	= newData.theTVD;
						preData.theNS 	= newData.theNS;
						preData.theEW 	= newData.theEW;
						preData.theVsec = newData.theVsec;
						preData.theDogleg = newData.theDogleg;
						preData.theX 	= newData.theX;
						preData.theY 	= newData.theY;
						preData.theZ   	= newData.theZ;



						//newData.theMD = newData.theMD + 30;
						//newData.theINC = newData.theINC + diffINCunit;
						newData.theAZI = newData.theAZI + diffAZIunit;

						//newData.theBuild = newData.theBuild + diffBunit;
						//newData.theTurn = newData.theTurn + diffTunit;


					}


				} //if diff MD > 30
				else {
					colorTrace("dMD not enough to draw point in between", "RED");
				}






			}
			else if(selectedOption == "secTypeM1TVD") {

				//========================================================================
				//==================||   The M1-Azi Method   ||===========================
				//========================================================================

				colorTrace("### Section type : M1 - TVD ###", "Green");


				//==|| In case the Build and Turn are not equal
				if(Math.abs(newRowData.theBuild) != Math.abs(newRowData.theTurn)) {
					colorTrace(" Turn and Build are not equal", "Green");
					if(newRowData.theBuild != 0 && newRowData.theTurn != 0) {
						colorTrace(" Turn and Build are not 0", "Blue");
						newRowData = methodM1TVD(newRowData, preRowData);
					}
					else if(newRowData.theBuild == 0) {
						colorTrace("But Build = 0", "RED");

						var n1 = duplicateThisRowData(newRowData);
						var n2 = duplicateThisRowData(newRowData);

						n1.theBuild = n1.theBuild + 0.001;
						n2.theBuild = n2.theBuild - 0.001;


						n1 = methodM1TVD(n1, preRowData);
						n2 = methodM1TVD(n2, preRowData);

						colorTrace("-- Taking the average values --", "Blue");
						//==|| Now we will take the average value
						newRowData.theMD  = (n1.theMD  + n2.theMD)  / 2;
						newRowData.theCL  = (n1.theCL  + n2.theCL)  / 2;
						newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
						newRowData.theINC = (n1.theINC + n2.theINC) / 2;
						//newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

						newRowData.theX = (n1.theX + n2.theX) / 2;
						newRowData.theY = (n1.theY + n2.theY) / 2;
						newRowData.theZ = (n1.theZ + n2.theZ) / 2;

						newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
						newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
						newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

						newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

						colorTrace("----------------------------------");
						logValues(newRowData, "Green");
						colorTrace("----------------------------------");
					}
					else if(newRowData.theTurn == 0) {
						colorTrace("But Turn = 0", "RED");

						var n1 = duplicateThisRowData(newRowData);
						var n2 = duplicateThisRowData(newRowData);

						n1.theTurn = n1.theTurn + 0.001;
						n2.theTurn = n2.theTurn - 0.001;


						n1 = methodM1TVD(n1, preRowData);
						n2 = methodM1TVD(n2, preRowData);

						colorTrace("-- Taking the average values --", "Blue");
						//==|| Now we will take the average value
						newRowData.theMD  = (n1.theMD  + n2.theMD)  / 2;
						newRowData.theCL  = (n1.theCL  + n2.theCL)  / 2;
						newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
						newRowData.theINC = (n1.theINC + n2.theINC) / 2;
						//newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

						newRowData.theX = (n1.theX + n2.theX) / 2;
						newRowData.theY = (n1.theY + n2.theY) / 2;
						newRowData.theZ = (n1.theZ + n2.theZ) / 2;

						newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
						newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
						newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

						newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

						colorTrace("----------------------------------");
						logValues(newRowData, "Green");
						colorTrace("----------------------------------");
					}
				}
				else { 
					colorTrace("### Turn and Build ARE equal ###", "RED");
					var n1 = duplicateThisRowData(newRowData);
					var n2 = duplicateThisRowData(newRowData);

					n1.theBuild = n1.theBuild + 0.01;
					n2.theBuild = n2.theBuild - 0.01;


					n1 = methodM1TVD(n1, preRowData);
					n2 = methodM1TVD(n2, preRowData);

					colorTrace("-- Taking the average values --", "Blue");
					//==|| Now we will take the average value
					newRowData.theMD  = (n1.theMD  + n2.theMD)  / 2;
					newRowData.theCL  = (n1.theCL  + n2.theCL)  / 2;
					newRowData.theAZI = (n1.theAZI + n2.theAZI) / 2;
					newRowData.theINC = (n1.theINC + n2.theINC) / 2;
					//newRowData.theTVD = (n1.theTVD + n2.theTVD) / 2;

					newRowData.theX = (n1.theX + n2.theX) / 2;
					newRowData.theY = (n1.theY + n2.theY) / 2;
					newRowData.theZ = (n1.theZ + n2.theZ) / 2;

					newRowData.theNS 	= (n1.theNS + n2.theNS) / 2;
					newRowData.theEW 	= (n1.theEW + n2.theEW) / 2;
					newRowData.theVsec 	= (n1.theVsec + n2.theVsec) / 2;

					newRowData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

					colorTrace("----------------------------------");
					logValues(newRowData, "Green");
					colorTrace("----------------------------------");

				}


				//==|| Putting the calculated MD, AZI
				$("#valueMD_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theMD.toFixed(2))) - 0;
				$("#valueINC_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theINC.toFixed(2))) - 0;

				$("#valueAZI_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theAZI.toFixed(2))) - 0;

				//==|| Putting new dN, dE, dZ in the row				
				$("#valueCL_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theCL.toFixed(2))) - 0;
				$("#valueNS_"  	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theNS.toFixed(2))) - 0;
				$("#valueEW_" 	+ noOfWellPathLinesStr).val(parseFloat(newRowData.theEW.toFixed(2))) - 0;
				$("#valueVsec_" + noOfWellPathLinesStr).val(parseFloat(newRowData.theVsec.toFixed(2))) - 0;
				$("#valueDogleg_" + noOfWellPathLinesStr).val(parseFloat(newRowData.theDogleg.toFixed(2))) - 0;

				//==|| Putting new X, Y, Z in the hidden DIVs in the row
				$("#valueX_"  + noOfWellPathLinesStr).text(newRowData.theX) - 0;
				$("#valueY_"  + noOfWellPathLinesStr).text(newRowData.theY) - 0;
				$("#valueZ_"  + noOfWellPathLinesStr).text(newRowData.theZ) - 0;



				//==|| Now looping to make the curve

				var diffMD = newRowData.theMD - preRowData.theMD;
				var noOfPointsInBetween = parseInt(diffMD / 30); // with the difference of 30

				colorTrace("diffMD = " + diffMD + ",    no of Points in between =" + noOfPointsInBetween);

				var diffINC = newRowData.theINC - preRowData.theINC;
				var diffINCunit = diffINC / noOfPointsInBetween;

				var diffAZI = newRowData.theAZI - preRowData.theAZI;
				var diffAZIunit = diffAZI / noOfPointsInBetween;


				var diffB = newRowData.theBuild - preRowData.theBuild;
				var diffBunit = diffB / noOfPointsInBetween;

				var diffT = newRowData.theTurn - preRowData.theTurn;
				var diffTunit = diffT / noOfPointsInBetween;

				var diffTVD = newRowData.theTVD - preRowData.theTVD;
				var diffTVDunit = diffTVD / noOfPointsInBetween;

				//var preData = preRowData;
				//var newData = newRowData;

				//==|| Stores the previous point
				var preData = duplicateThisRowData( preRowData ); 

				//==|| Stores the current point
				var newData = duplicateThisRowData(	newRowData );


				colorTrace("preData.theMD = " + preData.theMD + ", newData.theMD = " + newData.theMD, "RED");

				
				colorTrace("The Diff MD = " 	+ diffMD, "Blue");
				//colorTrace("The diff INC = " 	+ diffINC + "     , diff INC unit = " + diffINCunit);
				//colorTrace("The diff AZI = " 	+ diffAZI + "     , diff AZI unit = " + diffAZIunit);
				//colorTrace("The diff Build = " 	+ diffB + "     , diff Build unit = " + diffBunit);
				//colorTrace("The diff Turn = " 	+ diffT + "     , diff Turn unit = "  + diffTunit);
				colorTrace("The diff TVD = " 	+ diffTVD + "     , diff TVD unit = "  + diffTVDunit);


				if(diffMD > 30) { 

					colorTrace("###############################", 'Black');
					colorTrace("## Now Let's draw the curve  ##", 'Black');
					colorTrace("###############################", 'Black');
					
					//newData.theINC = preRowData.theINC + diffINCunit;
					//newData.theAZI = preRowData.theAZI + diffAZIunit;
					newData.theTVD = preRowData.theTVD + diffTVDunit;

					for(var i = 1; i <= noOfPointsInBetween; i++) {
						
						//newRowData = methodTangent(newRowData, preRowData);						
						//newData = methodTangent(newData, preData);
						//newData = methodM1TVD(newData, preData);
						if(Math.abs(newData.theBuild) != Math.abs(newData.theTurn)) {
							colorTrace(" Turn and Build are not equal", "Green");

							if(newData.theBuild != 0 && newData.theTurn != 0) {
								colorTrace("and the Build and Turn are not 0", "Blue");
								newData = methodM1TVD(newData, preData);
							}
							else if(newData.theBuild == 0) {
								colorTrace("But the Build = 0", "Red");

								var n1 = duplicateThisRowData(newData);
								var n2 = duplicateThisRowData(newData);

								n1.theBuild = n1.theBuild + 0.001;
								n2.theBuild = n2.theBuild - 0.001;

								
								n1 = methodM1TVD(n1, preData);
								n2 = methodM1TVD(n2, preData);

								colorTrace("-- Taking the average values --", "Blue");
								//==|| Now we will take the average value
								newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
								newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
								newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
								newRowData.theINC = (n1.theINC + n2.theINC) / 2;
								//newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

								newData.theX 	= (n1.theX + n2.theX) / 2;
								newData.theY 	= (n1.theY + n2.theY) / 2;
								newData.theZ 	= (n1.theZ + n2.theZ) / 2;

								newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
								newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
								newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

								newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

								colorTrace("----------------------------------");
								logValues(newData, "Green");
								colorTrace("----------------------------------");
							}
							else if(newData.theTurn == 0) {
								colorTrace("But the Turn = 0 ", "RED");

								var n1 = duplicateThisRowData(newData);
								var n2 = duplicateThisRowData(newData);

								n1.theTurn = n1.theTurn + 0.001;
								n2.theTurn = n2.theTurn - 0.001;

								
								n1 = methodM1TVD(n1, preData);
								n2 = methodM1TVD(n2, preData);

								colorTrace("-- Taking the average values --", "Blue");
								//==|| Now we will take the average value
								newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
								newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
								newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
								newRowData.theINC = (n1.theINC + n2.theINC) / 2;
								//newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

								newData.theX 	= (n1.theX + n2.theX) / 2;
								newData.theY 	= (n1.theY + n2.theY) / 2;
								newData.theZ 	= (n1.theZ + n2.theZ) / 2;

								newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
								newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
								newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

								newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

								colorTrace("----------------------------------");
								logValues(newData, "Green");
								colorTrace("----------------------------------");
							}
						}
						else { 
							colorTrace("### Turn and Build ARE equal ###", "RED");
							var n1 = duplicateThisRowData(newData);
							var n2 = duplicateThisRowData(newData);

							n1.theBuild = n1.theBuild + 0.01;
							n2.theBuild = n2.theBuild - 0.01;

							
							n1 = methodM1TVD(n1, preData);
							n2 = methodM1TVD(n2, preData);

							colorTrace("-- Taking the average values --", "Blue");
							//==|| Now we will take the average value
							newData.theMD 	= (n1.theMD  + n2.theMD)  / 2;
							newData.theCL 	= (n1.theCL  + n2.theCL)  / 2;
							newData.theAZI 	= (n1.theAZI + n2.theAZI) / 2;
							newRowData.theINC = (n1.theINC + n2.theINC) / 2;
							//newData.theTVD 	= (n1.theTVD + n2.theTVD) / 2;

							newData.theX 	= (n1.theX + n2.theX) / 2;
							newData.theY 	= (n1.theY + n2.theY) / 2;
							newData.theZ 	= (n1.theZ + n2.theZ) / 2;

							newData.theNS 	= (n1.theNS   + n2.theNS)   / 2;
							newData.theEW 	= (n1.theEW   + n2.theEW)   / 2;
							newData.theVsec	= (n1.theVsec + n2.theVsec) / 2;

							newData.theDogleg 	= (n1.theDogleg + n2.theDogleg) / 2;

							colorTrace("----------------------------------");
							logValues(newData, "Green");
							colorTrace("----------------------------------");

						}



						colorTrace("-- Back at the Station After M1 - AZI calculation --", "Black");
						logValues(newData, "Black");

						var theXis = newData.theX;
						var theYis = newData.theY;
						var theZis = newData.theZ;


						colorTrace("About to draw for curve x = " + theXis + ", y = " + theYis + ", z = " + theZis, "Green");
						//==|| Add a new line
						addWellPath(theXis, theYis, theZis);
						checkRangesForPlanes(theXis, theYis, theZis);

						render();



						preData.theMD 	= newData.theMD;
						preData.theAZI 	= newData.theAZI;
						preData.theINC 	= newData.theINC;
						preData.theCL 	= newData.theCL;
						preData.theTVD 	= newData.theTVD;
						preData.theNS 	= newData.theNS;
						preData.theEW 	= newData.theEW;
						preData.theVsec = newData.theVsec;
						preData.theDogleg = newData.theDogleg;
						preData.theX 	= newData.theX;
						preData.theY 	= newData.theY;
						preData.theZ   	= newData.theZ;



						//newData.theMD = newData.theMD + 30;
						//newData.theINC = newData.theINC + diffINCunit;
						//newData.theAZI = newData.theAZI + diffAZIunit;
						newData.theTVD = newData.theTVD + diffTVDunit;

						//newData.theBuild = newData.theBuild + diffBunit;
						//newData.theTurn = newData.theTurn + diffTunit;


					}


				} //if diff MD > 30
				else {
					colorTrace("dMD not enough to draw point in between", "RED");
				}




			}

			




			newX = newRowData.theX;
			newY = newRowData.theY;
			newZ = newRowData.theZ;

			colorTrace("*** Drawing the Point now ***");
			colorTrace("newX = " + newX + ",   newY = " + newY + ",   newZ = " +  newZ);
			//==|| Add a new line
			addWellPath(newX, newY, newZ);

			//==|| Check if the well is inside the ranges of the Planes
			checkRangesForPlanes(newX, newY, newZ);

			//==|| Render the changes
			render();


			//==|| Add the inactive row effect for the current row
			$(this).parent().parent().addClass("inactiveRowWellPathContainer");

			//==|| The sibling Remove button
			//var siblingRemoveBtn = $(this).parent().parent().find(".divRemovePathBtn");

			//==|| Display the Remove Button
			//$(siblingRemoveBtn).css({"display": "block"});

			//==|| Hide this Add button now
			$(this).parent().css({"display": "none"});

			//==|| Disable all the inputs
			$(this).parent().parent().find(".divMD").find("input").prop('disabled', true);
			$(this).parent().parent().find(".divINC").find("input").prop('disabled', true);
			$(this).parent().parent().find(".divAZI").find("input").prop('disabled', true);
			$(this).parent().parent().find(".divTVD").find("input").prop('disabled', true);
			$(this).parent().parent().find(".divBuild").find("input").prop('disabled', true);
			$(this).parent().parent().find(".divTurn").find("input").prop('disabled', true);


			//==|| Add an empty Row in the Table so that User can enter a new point
			addNewRowInTable(WELLVIS.noOfWellPathLines + 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "Tangent", "Add", true);
			WELLVIS.noOfWellPathLines++;

			

			 //==|| Now register yourself for the new buttons
			 registerAddPathButton();

			 registerButtonPressReleaseEffects();



			 /*
			//==|| Check if the edit button is visible or not
			if($(this).parent().parent().find(".divEditPathBtn").is(":visible")) {
				colorTrace("Edit button is visible", "Blue");
			}
			else {

				colorTrace("Edit button is invisible", "Red");
			}
			*/

		}
		else{
			colorTrace("Point is not okay to add", "Red");
		}


	});



}



//==|| Add a mew row in the table 
function addNewRowInTable(	currentRow, 
							valueMD, valueCL, 
							valueINC, valueAZI, valueTVD,
							valueX, valueY,	valueZ, valueNS, valueEW, valueVsec, 
							valueDogleg, valueBuild, valueTurn,
							valueSecType, activeButton, isActive
						) {

			//==|| No. of well path line increments
			//currentRow++;

			var newNoOfWellPathLinesStr = changeNoOfWellPathLinesIntoString(currentRow);

			//==|| Now let's add new row of inputs and buttons
			var newWellPathInfoBoxContainerStr = 
			 	'<div id="wellPathInfoBoxContainer_' + newNoOfWellPathLinesStr + '" class="wellPathInfoBoxContainer">' +
					'<div class="wellPathInputBoxContainer divMD">' +
						'<input id="valueMD_'+ newNoOfWellPathLinesStr +'" type="text" name="valueMD" value="' + valueMD + '" size="9"/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divCL">' +
						'<input id="valueCL_'+ newNoOfWellPathLinesStr +'" type="text" name="valueCL" value="' + valueCL + '" size="9" disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divINC">' +
						'<input id="valueINC_' + newNoOfWellPathLinesStr+ '" type="text" name="valueINC" value="' + valueINC + '" size="9"/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divAZI">' +
						'<input id="valueAZI_' + newNoOfWellPathLinesStr+ '" type="text" name="valueAZI" value="' + valueAZI + '" size="9"/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divTVD">' +
						'<input id="valueTVD_'+ newNoOfWellPathLinesStr +'" type="text" name="valueTVD" value="' + valueTVD + '" size="9" disabled/>' +
					'</div>' +
					'<div id="valueX_' + newNoOfWellPathLinesStr + '" style="display: none; float: left;">' + valueX + '</div>' +
					'<div id="valueY_' + newNoOfWellPathLinesStr + '" style="display: none; float: left;">' + valueY + '</div>' +
					'<div id="valueZ_' + newNoOfWellPathLinesStr + '" style="display: none; float: left;">' + valueZ + '</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divNS">' +
						'<input id="valueNS_'+ newNoOfWellPathLinesStr +'" type="text" name="valueNS" value="' + valueNS + '" size="9"  disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divEW">' +
						'<input id="valueEW_' + newNoOfWellPathLinesStr+ '" type="text" name="valueEW" value="' + valueEW + '" size="9"  disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divVsec">' +
						'<input id="valueVsec_' + newNoOfWellPathLinesStr+ '" type="text" name="valueVsec" value="' + valueVsec + '" size="9"  disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divDogleg">' +
						'<input id="valueDogleg_' + newNoOfWellPathLinesStr+ '" type="text" name="valueDogleg" value="' + valueDogleg + '" size="9"  disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divBuild">' +
						'<input id="valueBuild_' + newNoOfWellPathLinesStr+ '" type="text" name="valueBuild" value="' + valueBuild + '" size="9"  disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMiddleBoxes divTurn">' +
						'<input id="valueTurn_' + newNoOfWellPathLinesStr+ '" type="text" name="valueTurn" value="' + valueTurn + '" size="9"  disabled/>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divMethodType">' +
						'<select id="valueSecType_' + newNoOfWellPathLinesStr + '" style="width: 140px;">' +
						  	'<option value="secTypeTangent">Tangent</option>' +
						  	'<option value="secTypeM1INC">M1 - Inc</option>' +
						  	'<option value="secTypeM1AZI">M1 - Azi</option>' +
						  	'<option value="secTypeM1TVD">M1 - TVD</option>' +
						'</select>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divAddPathBtn" style="display: none;" >' +
						'<button id="addPathBtn_' + newNoOfWellPathLinesStr+ '" class="btn addEditPathBtn addPathBtn">' +
							'<span class""> Add</span>' +
						'</button>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divEditPathBtn" style="display: none;" >' +
						'<button id="editPathBtn_' + newNoOfWellPathLinesStr +'" class="btn addEditPathBtn editPathBtn">' +
							'<span class"">Edit</span>' +
						'</button>' +
					'</div>' +
					'<div class="wellPathInputBoxContainer divDonePathBtn" style="display: none;" >' + 
						'<button id="donePathBtn_' + newNoOfWellPathLinesStr + '" class="btn addEditPathBtn donePathBtn">' + 
							'<span class"">Done</span>' + 
						'</button>' + 
					'</div>' + 
					'<div class="wellPathInputBoxContainer divRemovePathBtn" style="display: none;" >' + 
						'<button id="removePathBtn_' + newNoOfWellPathLinesStr + '" class="btn addEditPathBtn donePathBtn">' + 
							'<span class"">Remove</span>' + 
						'</button>' + 
					'</div>' + 
			 	'</div>';




			//==|| Append in the Add Path Container
			$("#theAddPathContainer").append(newWellPathInfoBoxContainerStr);

			//==|| we could have the easier and shorter technique but i was too lazy to seach for it :D
			var selectedOptionIs = "";

			if(valueSecType == "Tangent") {
				selectedOptionIs = "secTypeTangent";
			}
			else if(valueSecType == "M1 - Inc") {
				selectedOptionIs = "secTypeM1INC";
			}
			else if(valueSecType == "M1 - Azi") {
				selectedOptionIs = "secTypeM1AZI";
			}
			else if(valueSecType == "M1 - TVD") {
				selectedOptionIs = "secTypeM1TVD";
			}


			


			//==|| Selecting the option in the Select box
			$("#valueSecType_" + newNoOfWellPathLinesStr + "").val(selectedOptionIs);


			//==|| Registering the event handler for Section Type Selection Option
			registerSelectSectionType(newNoOfWellPathLinesStr);

			//==|| If inactive state ; Disable all the Inputs
			if(!isActive){
				$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divMD").find("input").prop('disabled', true);
				$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divINC").find("input").prop('disabled', true);
				$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divAZI").find("input").prop('disabled', true);
				$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divBuild").find("input").prop('disabled', true);
				$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTurn").find("input").prop('disabled', true);

				$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find("#valueSecType_" + newNoOfWellPathLinesStr).prop('disabled', true);
			}


			//==|| The Buttons

			 if(activeButton == "Add") {
			 	$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"block"});
			 	$("#editPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#donePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#removePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 }
			 else if(activeButton == "Edit") {
			 	$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#editPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"block"});
			 	$("#donePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#removePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});

			 	/*	
				//==|| Disable all the inputs
				$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().parent().find(".divMD").find("input").prop('disabled', true);
				$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().parent().find(".divINC").find("input").prop('disabled', true);
				$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().parent().find(".divAZI").find("input").prop('disabled', true);
				$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().parent().find(".divNS").find("input").prop('disabled', true);
				$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().parent().find(".divEW").find("input").prop('disabled', true);
				$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().parent().find(".divVsec").find("input").prop('disabled', true);
				*/


			 }
			 else if(activeButton == "Done") {
			 	$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#editPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#donePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"block"});
			 	$("#removePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 }
			 else if(activeButton == "Remove") {
			 	$("#addPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#editPathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#donePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"none"});
			 	$("#removePathBtn_" + newNoOfWellPathLinesStr).parent().css({"display":"block"});
			 }

}



function registerEditPathButton() {
	$(".editPathBtn").click(function() {
		colorTrace("Edit button Pressed", "Green");

		//colorTrace("Edit path Btn", "RED");

		//==|| Remove the inactive color for this row
		$(this).parent().parent().removeClass("inactiveRowWellPathContainer");


		var noOfWellPathLinesStr = changeNoOfWellPathLinesIntoString(WELLVIS.noOfWellPathLines);
		
		//==||Hide the inputs for new point/line
		$("#wellPathInfoBoxContainer_" + noOfWellPathLinesStr).css({"display":"none"});


			//==|| The sibling Edit button
			var siblingDoneBtn = $(this).parent().parent().find(".divDonePathBtn");

			//==|| Display the Done Button
			$(siblingDoneBtn).css({"display": "block"});

			//==|| Hide this Edit button now
			$(this).parent().css({"display": "none"});

			//==|| Enable all the inputs
			$(this).parent().parent().find(".divMD").find("input").prop('disabled', false);
			$(this).parent().parent().find(".divINC").find("input").prop('disabled', false);
			$(this).parent().parent().find(".divAZI").find("input").prop('disabled', false);


	});


}


//==|| Register the Event listener for the Section Type Select Option
function registerSelectSectionType(newNoOfWellPathLinesStr){

	$("#valueSecType_" + newNoOfWellPathLinesStr).change(function (){
		var optionSelected = $("option:selected", this);
    	var valueSelected = this.value;
		//colorTrace("optionSelected = " + optionSelected + " valueSelected = " + valueSelected, "Green");

		if(valueSelected == "secTypeTangent"){
			colorTrace("valueSelected = Tangent", "Green");
			//==|| This means that we can enter into MD, INC & Azimuth only

			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divMD").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divINC").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divAZI").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTVD").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divBuild").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTurn").find("input").prop('disabled', true);

		}
		else if(valueSelected == "secTypeM1INC"){
			colorTrace("valueSelected = M1 - Inc", "Green");
			//==|| This means that we can enter into Inc, Build & Turn only

			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divMD").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divINC").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divAZI").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTVD").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divBuild").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTurn").find("input").prop('disabled', false);

		}
		else if(valueSelected == "secTypeM1AZI"){
			colorTrace("valueSelected = M1 - Azi", "Green");
			//==|| This means that we can enter into Azi, Build & Turn only

			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divMD").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divINC").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divAZI").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTVD").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divBuild").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTurn").find("input").prop('disabled', false);
		}
		else if(valueSelected == "secTypeM1TVD"){
			colorTrace("valueSelected = M1 - TVD", "Green");
			//==|| This means that we can enter into TVD, Build & Turn only

			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divMD").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divINC").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divAZI").find("input").prop('disabled', true);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTVD").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divBuild").find("input").prop('disabled', false);
			$("#wellPathInfoBoxContainer_" + newNoOfWellPathLinesStr).find(".divTurn").find("input").prop('disabled', false);
		}

	});

}








</script>



{% endblock %}
